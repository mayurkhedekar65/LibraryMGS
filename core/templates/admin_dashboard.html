{% extends "base.html" %}
{% block content %}

<div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Admin Dashboard</h1>
    <p class="text-gray-500">Manage library operations, books, and members.</p>
</div>

<!-- Quick Stats Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
        <div class="text-gray-500 text-sm font-medium uppercase">Total Books</div>
        <div class="text-3xl font-bold text-gray-900 mt-2">{{ total_books }}</div>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
        <div class="text-gray-500 text-sm font-medium uppercase">Books Issued</div>
        <div class="text-3xl font-bold text-blue-600 mt-2">{{ books_issued }}</div>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
        <div class="text-gray-500 text-sm font-medium uppercase">Registered Members</div>
        <div class="text-3xl font-bold text-gray-900 mt-2">{{ total_members }}</div>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
        <div class="text-gray-500 text-sm font-medium uppercase">Overdue Returns</div>
        <div class="text-3xl font-bold text-red-600 mt-2">{{ overdue_count }}</div>
    </div>
</div>

<!-- Main Actions -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    
    <!-- Book Management Section -->
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
        <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>ðŸ“š</span> Book Inventory
        </h3>
        <p class="text-gray-500 text-sm mb-6">Add new books to the library or update existing book details (Title, Author, Copies).</p>
        <div class="flex gap-3">
            <a href="{% url 'add_book' %}" class="flex-1 bg-green-600 text-white text-center px-4 py-2.5 rounded-lg font-medium hover:bg-green-700 transition-colors">
                + Add New Book
            </a>
            <a href="{% url 'manage_books' %}" class="flex-1 bg-white border border-gray-300 text-gray-700 text-center px-4 py-2.5 rounded-lg font-medium hover:bg-gray-50 transition-colors">
                Manage All Books
            </a>
        </div>
    </div>

    <!-- Transaction Section -->
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
        <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>ðŸ”„</span> Circulation
        </h3>
        <p class="text-gray-500 text-sm mb-6">Issue books to members or process returns and calculate fines.</p>
        <div class="flex gap-3">
            <a href="{% url 'issue_book' %}" class="flex-1 bg-blue-600 text-white text-center px-4 py-2.5 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                Issue Book
            </a>
            <a href="{% url 'all_transactions' %}" class="flex-1 bg-white border border-gray-300 text-gray-700 text-center px-4 py-2.5 rounded-lg font-medium hover:bg-gray-50 transition-colors">
                Process Returns
            </a>
        </div>
    </div>
</div>

<!-- Recent Activity Table -->
<div class="mt-10">
    <h3 class="text-lg font-bold text-gray-900 mb-4">Recent Activity</h3>
    <div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Member</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Book</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Date</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for t in recent_transactions %}
                <tr>
                    <td class="px-6 py-3 text-sm text-gray-900">{{ t.member.user.username }}</td>
                    <td class="px-6 py-3 text-sm text-gray-500">{{ t.book.title }}</td>
                    <td class="px-6 py-3 text-sm text-gray-500">{{ t.issue_date|date:"M d, Y" }}</td>
                    <td class="px-6 py-3 text-sm">
                        <span class="px-2 py-1 text-xs rounded-full {% if t.status == 'Issued' %}bg-yellow-100 text-yellow-800{% else %}bg-green-100 text-green-800{% endif %}">
                            {{ t.status }}
                        </span>
                    </td>
                </tr>
                {% empty %}
                <tr><td colspan="4" class="px-6 py-4 text-center text-gray-500">No recent activity.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}